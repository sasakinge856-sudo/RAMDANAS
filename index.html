<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#0b0f1e" />
  <title>Neon Hub v3</title>

  <style>
    /* =========================
       THEME TOKENS (default)
       ========================= */
    :root{
      --bgA:#070a14; --bgB:#081a2e; --bgC:#2a0b2a;
      --txt:#eef4ff; --mut:rgba(238,244,255,.72);
      --glass1: rgba(255,255,255,.12);
      --glass2: rgba(255,255,255,.06);
      --stroke: rgba(255,255,255,.14);
      --c1:#67f0ff; --c2:#b06cff; --c3:#ff5fd1; --c4:#ffd36f;
      --ok:#7dffb3; --bad:#ff6b6b;
      --shadow: 0 18px 70px rgba(0,0,0,.55);
      --shadow2: 0 10px 40px rgba(0,0,0,.45);
      --r: 26px;
      --tileRadius: 24px;
      --tilePad: 16px;
      --fontScale: 1;
    }

    /* =========================
       THEMES (4)
       ========================= */
    body[data-theme="aura"]{
      --bgA:#050710; --bgB:#09244a; --bgC:#0b0f1e;
      --c1:#7af7ff; --c2:#6cfab4; --c3:#ff6ad5; --c4:#ffe27a;
      --glass1: rgba(255,255,255,.10);
      --glass2: rgba(255,255,255,.05);
    }
    body[data-theme="sunset"]{
      --bgA:#12040a; --bgB:#2b0722; --bgC:#1d0e30;
      --c1:#ff9a5a; --c2:#ff5fd1; --c3:#a67bff; --c4:#ffd36f;
      --glass1: rgba(255,255,255,.11);
      --glass2: rgba(255,255,255,.06);
    }
    body[data-theme="ice"]{
      --bgA:#02060b; --bgB:#052035; --bgC:#041117;
      --c1:#7bd3ff; --c2:#85ffd6; --c3:#7b9bff; --c4:#b8f7ff;
      --glass1: rgba(255,255,255,.09);
      --glass2: rgba(255,255,255,.04);
      --stroke: rgba(255,255,255,.12);
    }
    /* Theme 4 changes layout + style */
    body[data-theme="chaos"]{
      --bgA:#07020a; --bgB:#18061f; --bgC:#040814;
      --c1:#ff4df3; --c2:#5bffec; --c3:#ffe56f; --c4:#9d7bff;
      --tileRadius: 28px;
      --tilePad: 18px;
      --fontScale: 1.03;
    }

    /* =========================
       Base
       ========================= */
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Tahoma, Arial, sans-serif;
      color:var(--txt);
      overflow:hidden;
      font-size: calc(16px * var(--fontScale));

      background:
        radial-gradient(900px 650px at 15% 85%, color-mix(in oklab, var(--c1) 18%, transparent), transparent 60%),
        radial-gradient(900px 650px at 85% 15%, color-mix(in oklab, var(--c2) 18%, transparent), transparent 60%),
        radial-gradient(900px 650px at 55% 60%, color-mix(in oklab, var(--c3) 14%, transparent), transparent 60%),
        linear-gradient(140deg, var(--bgA), var(--bgB), var(--bgC));
    }

    /* Fullscreen fix (no inner black gaps) */
    .app{
      position:fixed;
      inset:0;
      height: 100svh;
      height: 100dvh;
      display:flex;
      justify-content:center;
      align-items:stretch;
      padding:
        calc(10px + env(safe-area-inset-top))
        12px
        calc(10px + env(safe-area-inset-bottom));
      overscroll-behavior: none;
    }

    /* Floating emojis */
    .sky{ position:fixed; inset:0; pointer-events:none; overflow:hidden; }
    .e{
      position:absolute;
      font-size: clamp(16px, 3.8vw, 34px);
      opacity:.95;
      filter: drop-shadow(0 12px 20px rgba(0,0,0,.35));
      animation: rise linear infinite;
      will-change: transform, opacity;
    }
    @keyframes rise{
      from{ transform: translate3d(var(--dx), 110svh, 0) rotate(var(--r)); opacity:0; }
      15%{ opacity:.95; }
      to{ transform: translate3d(var(--dx), -25svh, 0) rotate(calc(var(--r) + 140deg)); opacity:0; }
    }
    .vignette{
      position:fixed; inset:0; pointer-events:none;
      background: radial-gradient(circle at 50% 38%, transparent 34%, rgba(0,0,0,.62) 88%);
      mix-blend-mode: multiply;
    }

    /* Panels / Cards fill height */
    .panel{
      width: min(980px, 96vw);
      height: 100%;
      display:none;
      animation: pop .32s ease both;
    }
    .panel.active{ display:block; }
    @keyframes pop{
      from{ opacity:0; transform: translate3d(0, 14px, 0) scale(.99); }
      to{ opacity:1; transform: translate3d(0,0,0) scale(1); }
    }

    .card{
      height: 100%;
      display:flex;
      flex-direction:column;
      border-radius: var(--r);
      border:1px solid var(--stroke);
      background: linear-gradient(180deg, var(--glass1), var(--glass2));
      box-shadow: var(--shadow);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      overflow:hidden;
      position:relative;
    }

    .header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding: 14px 14px 10px;
      flex: 0 0 auto;
    }

    .brand{
      display:flex;
      flex-direction:column;
      gap:4px;
      min-width: 0;
    }
    .brand h1{
      margin:0;
      font-size: clamp(18px, 4.8vw, 32px);
      letter-spacing:.2px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .brand p{
      margin:0;
      color: var(--mut);
      font-size: 13px;
      line-height: 1.4;
    }

    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color: rgba(238,244,255,.82);
      font-weight: 900;
      font-size: 12px;
      letter-spacing:.2px;
      flex: 0 0 auto;
      white-space:nowrap;
    }

    /* content scroll INSIDE card */
    .content{
      padding: 10px 14px 14px;
      flex: 1;
      overflow: auto;
      -webkit-overflow-scrolling: touch;
    }

    /* Buttons */
    .btn{
      border:none;
      cursor:pointer;
      border-radius: 16px;
      padding: 12px 14px;
      font-weight: 1000;
      color:#0b0710;
      background: linear-gradient(135deg, var(--c4), color-mix(in oklab, var(--c4) 55%, transparent));
      box-shadow: var(--shadow2);
      transition: transform .12s ease, filter .12s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:active{ transform: scale(.99); }
    .btn.ghost{
      color: var(--txt);
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.16);
      box-shadow: none;
    }
    .btn.pink{
      color: white;
      background: linear-gradient(135deg, var(--c3), color-mix(in oklab, var(--c3) 55%, transparent));
      filter: drop-shadow(0 0 18px color-mix(in oklab, var(--c3) 28%, transparent));
    }
    .btn.cyan{
      color:#061017;
      background: linear-gradient(135deg, var(--c1), color-mix(in oklab, var(--c1) 55%, transparent));
      filter: drop-shadow(0 0 18px color-mix(in oklab, var(--c1) 22%, transparent));
    }
    .btn.violet{
      color:#0c0714;
      background: linear-gradient(135deg, var(--c2), color-mix(in oklab, var(--c2) 55%, transparent));
      filter: drop-shadow(0 0 18px color-mix(in oklab, var(--c2) 22%, transparent));
    }

    /* Home grid (theme 4 changes layout) */
    .grid{
      display:grid;
      gap:14px;
      grid-template-columns: 1fr;
      margin-top: 10px;
    }
    @media (min-width: 760px){
      .grid{ grid-template-columns: 1fr 1fr; }
    }
    body[data-theme="chaos"] .grid{
      grid-template-columns: 1fr;
      gap: 12px;
    }

    .tile{
      border-radius: var(--tileRadius);
      border:1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.05));
      box-shadow: var(--shadow2);
      padding: var(--tilePad) 14px;
      cursor:pointer;
      position:relative;
      overflow:hidden;
      transition: transform .12s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .tile:active{ transform: scale(.99); }
    .tile::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(280px 140px at 25% 25%, color-mix(in oklab, var(--c1) 22%, transparent), transparent 60%),
        radial-gradient(280px 140px at 85% 70%, color-mix(in oklab, var(--c3) 18%, transparent), transparent 60%),
        radial-gradient(280px 140px at 60% 40%, color-mix(in oklab, var(--c2) 16%, transparent), transparent 62%);
      opacity:.9;
      pointer-events:none;
    }
    .tile .row{
      position:relative;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .tile h2{
      margin:0;
      font-size: 18px;
      font-weight: 1000;
    }
    .tile p{
      position:relative;
      margin:10px 0 0;
      color: var(--mut);
      font-size: 14px;
      line-height:1.65;
    }
    .icon{
      font-size: 24px;
      filter: drop-shadow(0 10px 16px rgba(0,0,0,.35));
    }

    /* Pager */
    .pager{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin: 10px 0 12px;
      flex: 0 0 auto;
    }
    .page-title{
      font-weight: 1000;
      font-size: 14px;
      color: rgba(238,244,255,.90);
      text-align:center;
      flex: 1 1 auto;
      min-width: 0;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .nums{
      display:flex;
      gap:8px;
      overflow:auto;
      padding-bottom: 6px;
      margin-bottom: 12px;
      scrollbar-width: none;
    }
    .nums::-webkit-scrollbar{ display:none; }

    .num{
      flex: 0 0 auto;
      width: 42px;
      height: 42px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.22);
      color: var(--txt);
      font-weight: 1000;
      cursor:pointer;
      display:grid;
      place-items:center;
      -webkit-tap-highlight-color: transparent;
      transition: transform .12s ease, outline-color .12s ease;
    }
    .num:active{ transform: scale(.99); }
    .num.active{
      outline: 2px solid color-mix(in oklab, var(--c1) 35%, transparent);
      background: linear-gradient(180deg, color-mix(in oklab, var(--c1) 18%, transparent), rgba(0,0,0,.22));
    }

    /* Typewriter box */
    .box{
      border-radius: 22px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      padding: 16px 14px;
      box-shadow: 0 12px 44px rgba(0,0,0,.30);
      margin-bottom: 12px;
    }
    .type{
      margin:0;
      font-size: clamp(16px, 4.2vw, 20px);
      line-height: 1.85;
      font-weight: 900;
      white-space: pre-wrap;
    }
    .cursor{
      display:inline-block;
      width: 10px;
      margin-right: 6px;
      border-right: 2px solid rgba(238,244,255,.75);
      animation: blink .9s step-end infinite;
    }
    @keyframes blink{ 50%{ opacity:0; } }

    /* Quiz */
    .q{
      margin:0 0 10px;
      font-size: 16px;
      font-weight: 1000;
      line-height: 1.65;
    }
    .opts{
      display:grid;
      gap:10px;
    }
    .opt{
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.20);
      color: var(--txt);
      padding: 12px 12px;
      font-weight: 900;
      text-align:right;
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
      transition: transform .12s ease, background .12s ease;
    }
    .opt:active{ transform: scale(.99); }
    .opt.correct{ outline: 2px solid color-mix(in oklab, var(--ok) 35%, transparent); background: color-mix(in oklab, var(--ok) 10%, rgba(0,0,0,.18)); }
    .opt.wrong{ outline: 2px solid color-mix(in oklab, var(--bad) 35%, transparent); background: color-mix(in oklab, var(--bad) 10%, rgba(0,0,0,.18)); }

    .msgline{ min-height: 18px; font-size: 13px; color: rgba(238,244,255,.78); margin-top:10px; }
    .msgline.ok{ color: rgba(125,255,179,.92); }
    .msgline.bad{ color: rgba(255,107,107,.92); }

    body.flash-red{ animation: redFlash .65s ease-in-out; }
    @keyframes redFlash{
      55%{
        background: radial-gradient(1200px 800px at 50% 40%, rgba(255,43,43,.24), transparent 55%),
                   linear-gradient(160deg, #210000, #0e0000) !important;
      }
    }

    /* Games menu buttons */
    .game-grid{
      display:grid;
      gap:10px;
      grid-template-columns: 1fr;
    }
    @media (min-width: 760px){
      .game-grid{ grid-template-columns: 1fr 1fr; }
    }

    /* Canvas games */
    .game-wrap{
      border-radius: 22px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      padding: 12px;
      box-shadow: 0 12px 44px rgba(0,0,0,.28);
    }
    canvas{
      width:100%;
      height:auto;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.25);
      display:block;
      touch-action: none;
    }
    .controls{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .kbd{
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.22);
      padding: 10px 12px;
      color: rgba(238,244,255,.85);
      font-weight: 900;
      font-size: 13px;
      line-height: 1.5;
      flex: 1 1 auto;
      min-width: 180px;
    }

    /* XO board */
    .xo-board{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }
    .xo-cell{
      height: 86px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      box-shadow: 0 14px 38px rgba(0,0,0,.26);
      display:grid;
      place-items:center;
      font-size: 34px;
      font-weight: 1000;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .xo-cell:active{ transform: scale(.99); }
    .xo-cell.disabled{ cursor:default; opacity:.85; }

    /* Memory */
    .grid16{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }
    .mcard{
      height: 74px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      box-shadow: 0 14px 38px rgba(0,0,0,.26);
      cursor:pointer;
      position:relative;
      overflow:hidden;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      transition: transform .12s ease;
    }
    .mcard:active{ transform: scale(.99); }
    .mfront, .mback{
      position:absolute; inset:0;
      display:grid; place-items:center;
      border-radius: 18px;
      transition: opacity .18s ease;
    }
    .mfront{ font-weight: 1000; font-size: 22px; opacity:1; color: rgba(238,245,255,.85); }
    .mback{ font-size: 34px; opacity:0; filter: drop-shadow(0 10px 18px rgba(0,0,0,.35)); }
    .mcard.revealed .mfront{ opacity:0; }
    .mcard.revealed .mback{ opacity:1; }
    .mcard.matched{ outline: 2px solid color-mix(in oklab, var(--ok) 35%, transparent); cursor:default; }

    /* Modal messages */
    .modal{
      position:fixed;
      inset:0;
      display:none;
      place-items:end center;
      padding: 14px;
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      z-index: 50;
    }
    .modal.show{ display:grid; }

    .sheet{
      width:min(720px, 96vw);
      border-radius: 28px;
      border:1px solid rgba(255,255,255,.14);
      background:
        radial-gradient(700px 320px at 15% 0%, color-mix(in oklab, var(--c1) 18%, transparent), transparent 60%),
        radial-gradient(700px 320px at 85% 25%, color-mix(in oklab, var(--c3) 18%, transparent), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.05));
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .field{
      width:100%;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.24);
      color: var(--txt);
      padding: 12px 12px;
      outline:none;
      font-size: 16px;
    }
    textarea.field{ min-height: 140px; resize: vertical; }

    .footer{
      text-align:center;
      font-size: 13px;
      color: rgba(238,244,255,.65);
      padding: 12px 10px 0;
    }
  </style>
</head>

<body data-theme="aura">
  <div class="sky" id="sky" aria-hidden="true"></div>
  <div class="vignette" aria-hidden="true"></div>

  <div class="app">
    <!-- HOME -->
    <section class="panel active" id="home">
      <div class="card">
        <div class="header">
          <div class="brand">
            <h1>Neon Hub</h1>
            <p>ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ + Ø«ÙŠÙ…Ø§Øª + Ø£Ø³Ø¦Ù„Ø© ÙƒØªÙŠØ± + Ø£Ù„ØºØ§Ø²â€¦</p>
          </div>
          <span class="chip">Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        </div>

        <div class="content">
          <div class="grid" id="homeGrid">
            <div class="tile" data-open="jokes">
              <div class="row">
                <h2>Ù†ÙƒØª Ø¨ÙŠØ¶</h2>
                <div class="icon">ğŸ¥š</div>
              </div>
              <p>Ù†ÙƒØª Ø¬Ø¯ÙŠØ¯Ø© â€” ØµÙØ­Ø§Øª Ø¨Ø£Ø±Ù‚Ø§Ù… + Ø±Ø¬ÙˆØ¹/Ø§Ù„ØªØ§Ù„ÙŠ.</p>
            </div>

            <div class="tile" data-open="gk">
              <div class="row">
                <h2>Ø§Ø³Ø¦Ù„Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ù‡</h2>
                <div class="icon">ğŸ§ </div>
              </div>
              <p>Ø£ÙƒØªØ± Ù…Ù† 20 Ø³Ø¤Ø§Ù„ â€” ØªÙØ§Ø¹Ù„ÙŠ.</p>
            </div>

            <div class="tile" data-open="countries">
              <div class="row">
                <h2>Ø§Ø³Ø¦Ù„Ù‡ Ø¹Ù† Ø§Ù„Ø¯ÙˆÙ„</h2>
                <div class="icon">ğŸŒ</div>
              </div>
              <p>Ø£ÙƒØªØ± Ù…Ù† 20 Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯ Ø¹Ù† Ø¯ÙˆÙ„/Ø¹ÙˆØ§ØµÙ…/Ù‚Ø§Ø±Ø§Øª.</p>
            </div>

            <div class="tile" data-open="themes">
              <div class="row">
                <h2>Ø§Ù„Ø«ÙŠÙ…Ø§Øª</h2>
                <div class="icon">ğŸ¨</div>
              </div>
              <p>4 Ø«ÙŠÙ…Ø§Øª ØªØºÙŠÙ‘Ø± Ø´ÙƒÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ (ÙˆØ§Ø­Ø¯ ÙŠØºÙŠÙ‘Ø± Ø§Ù„Ø¯ÙŠØ²Ø§ÙŠÙ†/Ø§Ù„ØªØ±ØªÙŠØ¨ ÙƒÙ…Ø§Ù†).</p>
            </div>
          </div>

          <div style="display:flex; gap:10px; margin-top:14px; flex-wrap:wrap;">
            <button class="btn cyan" id="openGames" type="button">ğŸ® Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</button>
            <button class="btn violet" id="openRiddles" type="button">ğŸ§© Ø£Ù„ØºØ§Ø² Ø²ÙŠØ§Ø¯Ø©</button>
            <button class="btn pink" id="openMessages" type="button">âœ‰ï¸ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„(Ù„Ù„Ø¶Ø±ÙˆØ±Ù‡)</button>
          </div>

          <div class="footer">ØµÙÙ†Ø¹ Ø¨ÙˆØ§Ø³Ø·Ø© : Ø¨Ù†ÙŠ Ø§Ø¯Ù… Ø¨Ø±Ø§Ø³ ÙØ±Ø®Ù‡ v2.2 .</div>
        </div>
      </div>
    </section>

    <!-- JOKES -->
    <section class="panel" id="jokes">
      <div class="card">
        <div class="header">
          <button class="btn ghost" data-home>âŸµ</button>
          <div class="brand">
            <h1>Ù†ÙƒØª Ø¨ÙŠØ¶ (Ø¬Ø¯ÙŠØ¯Ø©)</h1>
            <p>Ø±Ù‚Ù… + Ø±Ø¬ÙˆØ¹/Ø§Ù„ØªØ§Ù„ÙŠâ€¦</p>
          </div>
          <span class="chip">Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        </div>

        <div class="content">
          <div class="pager">
            <button class="btn ghost" id="jPrev">â—€</button>
            <div class="page-title" id="jTitle">ØµÙØ­Ø©</div>
            <button class="btn ghost" id="jNext">â–¶</button>
          </div>
          <div class="nums" id="jNums"></div>

          <div class="box">
            <p class="type" id="jText"></p>
          </div>

          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn pink" type="button" id="jReplay">â†» Ø¥Ø¹Ø§Ø¯Ø© ÙƒØªØ§Ø¨Ø©</button>
            <button class="btn cyan" type="button" id="jMsg">âœ‰ï¸ Ø±Ø³Ø§Ù„Ø©</button>
          </div>
        </div>
      </div>
    </section>

    <!-- GK -->
    <section class="panel" id="gk">
      <div class="card">
        <div class="header">
          <button class="btn ghost" data-home>âŸµ</button>
          <div class="brand">
            <h1>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ø©</h1>
            <p>Ø£ÙƒØªØ± Ù…Ù† 20 Ø³Ø¤Ø§Ù„ â€” Ø§Ø®ØªÙŠØ§Ø±Ø§Øª.</p>
          </div>
          <span class="chip">Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        </div>

        <div class="content">
          <div class="pager">
            <button class="btn ghost" id="gPrev">â—€</button>
            <div class="page-title" id="gTitle">Ø³Ø¤Ø§Ù„</div>
            <button class="btn ghost" id="gNext">â–¶</button>
          </div>
          <div class="nums" id="gNums"></div>

          <div class="box">
            <p class="q" id="gQ"></p>
            <div class="opts" id="gOpts"></div>
            <div class="msgline" id="gMsg"></div>
          </div>

          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn cyan" type="button" id="gReset">ğŸ§¼ ØªØµÙÙŠØ±</button>
            <button class="btn pink" type="button" id="gMsgBtn">âœ‰ï¸ Ø±Ø³Ø§Ù„Ø©</button>
          </div>
        </div>
      </div>
    </section>

    <!-- COUNTRIES -->
    <section class="panel" id="countries">
      <div class="card">
        <div class="header">
          <button class="btn ghost" data-home>âŸµ</button>
          <div class="brand">
            <h1>Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¯ÙˆÙ„</h1>
            <p>Ø£ÙƒØªØ± Ù…Ù† 20 Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯.</p>
          </div>
          <span class="chip">Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        </div>

        <div class="content">
          <div class="pager">
            <button class="btn ghost" id="cPrev">â—€</button>
            <div class="page-title" id="cTitle">Ø³Ø¤Ø§Ù„</div>
            <button class="btn ghost" id="cNext">â–¶</button>
          </div>
          <div class="nums" id="cNums"></div>

          <div class="box">
            <p class="q" id="cQ"></p>
            <div class="opts" id="cOpts"></div>
            <div class="msgline" id="cMsg"></div>
          </div>

          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn cyan" type="button" id="cReset">ğŸ§¼ ØªØµÙÙŠØ±</button>
            <button class="btn pink" type="button" id="cMsgBtn">âœ‰ï¸ Ø±Ø³Ø§Ù„Ø©</button>
          </div>
        </div>
      </div>
    </section>

    <!-- THEMES -->
    <section class="panel" id="themes">
      <div class="card">
        <div class="header">
          <button class="btn ghost" data-home>âŸµ</button>
          <div class="brand">
            <h1>Ø§Ù„Ø«ÙŠÙ…Ø§Øª</h1>
            <p>4 Ø«ÙŠÙ…Ø§Øª â€” ÙˆØ§Ø­Ø¯ Ù…Ù†Ù‡Ù… ÙŠØºÙŠØ± Ø§Ù„Ø¯ÙŠØ²Ø§ÙŠÙ† ÙˆØ§Ù„ØªØ±ØªÙŠØ¨.</p>
          </div>
          <span class="chip">Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        </div>

        <div class="content">
          <div class="box">
            <p class="q">Ø§Ø®ØªØ§Ø± Ø«ÙŠÙ…:</p>
            <div class="opts" style="gap:12px;">
              <button class="opt" type="button" data-theme="aura">AURA â€” Ù†ÙŠÙˆÙ† Ø±Ø§ÙŠÙ‚ âœ¨</button>
              <button class="opt" type="button" data-theme="sunset">SUNSET â€” ÙˆØ±Ø¯ÙŠ/Ø°Ù‡Ø¨ÙŠ ğŸŒ…</button>
              <button class="opt" type="button" data-theme="ice">ICE â€” Ø¨Ø§Ø±Ø¯/Ù‡Ø§Ø¯Ø¦ â„ï¸</button>
              <button class="opt" type="button" data-theme="chaos">CHAOS â€” ÙŠØºÙŠÙ‘Ø± Ø´ÙƒÙ„ ÙˆØªØ±ØªÙŠØ¨ Ø§Ù„ØµÙØ­Ø© ğŸ”¥</button>
            </div>
            <div class="msgline" id="tMsg"></div>
          </div>

          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn cyan" id="tBackHome" type="button">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
          </div>
        </div>
      </div>
    </section>

    <!-- RIDDLES -->
    <section class="panel" id="riddles">
      <div class="card">
        <div class="header">
          <button class="btn ghost" data-home>âŸµ</button>
          <div class="brand">
            <h1>Ø£Ù„ØºØ§Ø² Ø²ÙŠØ§Ø¯Ø©</h1>
            <p>ØµÙØ­Ø§Øª + Ø£Ø±Ù‚Ø§Ù… + Ø±Ø¬ÙˆØ¹/Ø§Ù„ØªØ§Ù„ÙŠ.</p>
          </div>
          <span class="chip">Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        </div>

        <div class="content">
          <div class="pager">
            <button class="btn ghost" id="rPrev">â—€</button>
            <div class="page-title" id="rTitle">Ù„ØºØ²</div>
            <button class="btn ghost" id="rNext">â–¶</button>
          </div>
          <div class="nums" id="rNums"></div>

          <div class="box">
            <p class="q" id="rQ"></p>
            <div class="opts" id="rOpts"></div>
            <div class="msgline" id="rMsg"></div>
          </div>

          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn cyan" type="button" id="rReset">ğŸ§¼ ØªØµÙÙŠØ±</button>
            <button class="btn pink" type="button" id="rMsgBtn">âœ‰ï¸ Ø±Ø³Ø§Ù„Ø©</button>
          </div>
        </div>
      </div>
    </section>

    <!-- GAMES MENU -->
    <section class="panel" id="games">
      <div class="card">
        <div class="header">
          <button class="btn ghost" data-home>âŸµ</button>
          <div class="brand">
            <h1>ğŸ® Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</h1>
            <p>ÙƒÙ„ Ù„Ø¹Ø¨Ø© ÙÙŠ ØµÙØ­Ø© Ù„ÙˆØ­Ø¯Ù‡Ø§.</p>
          </div>
          <span class="chip">Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        </div>

        <div class="content">
          <div class="game-grid">
            <button class="btn cyan" type="button" data-game="xo">âŒâ­• Ù„Ø¹Ø¨Ø© XO</button>
            <button class="btn pink" type="button" data-game="memory">ğŸƒ Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø©</button>
            <button class="btn violet" type="button" data-game="dino">ğŸ¦– Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¯ÙŠÙ†Ø§ØµÙˆØ±</button>
            <button class="btn" type="button" data-game="frog">ğŸ¸ Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¶ÙØ¯Ø¹</button>
          </div>

          <div style="display:flex; gap:10px; margin-top:14px; flex-wrap:wrap;">
            <button class="btn pink" type="button" id="gMsg2">âœ‰ï¸ Ø±Ø³Ø§Ù„Ø©</button>
          </div>
        </div>
      </div>
    </section>

    <!-- XO GAME -->
    <section class="panel" id="xo">
      <div class="card">
        <div class="header">
          <button class="btn ghost" data-back="games">âŸµ</button>
          <div class="brand">
            <h1>âŒâ­• XO Ø¶Ø¯ ÙƒÙ…Ø¨ÙŠÙˆØªØ±</h1>
            <p>Ø¥Ù†Øª âŒ â€” Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± â­•</p>
          </div>
          <span class="chip">Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</span>
        </div>

        <div class="content">
          <div class="box">
            <div class="xo-board" id="xoBoard"></div>
            <div class="msgline" id="xoStatus">Ø¯ÙˆØ±Ùƒ.</div>
            <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:10px;">
              <button class="btn cyan" id="xoRestart" type="button">â†» Ø¥Ø¹Ø§Ø¯Ø©</button>
              <button class="btn pink" type="button" id="xoMsg">âœ‰ï¸ Ø±Ø³Ø§Ù„Ø©</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- MEMORY GAME -->
    <section class="panel" id="memory">
      <div class="card">
        <div class="header">
          <button class="btn ghost" data-back="games">âŸµ</button>
          <div class="brand">
            <h1>ğŸƒ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø© 4Ã—4</h1>
            <p>ÙƒÙ„ Ù…Ø±Ø© ØªÙˆØ²ÙŠØ¹ Ø¹Ø´ÙˆØ§Ø¦ÙŠ.</p>
          </div>
          <span class="chip">Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</span>
        </div>

        <div class="content">
          <div class="box">
            <div style="display:flex; gap:10px; flex-wrap:wrap; margin-bottom:10px;">
              <button class="btn cyan" id="memStart" type="button">Ø§Ø¨Ø¯Ø£ / Ø¥Ø¹Ø§Ø¯Ø©</button>
              <button class="btn pink" id="memMsg" type="button">âœ‰ï¸ Ø±Ø³Ø§Ù„Ø©</button>
            </div>
            <div class="grid16" id="memoryGrid"></div>
            <div class="msgline" id="memStatus">ØªÙ…: 0 / 8</div>
          </div>
        </div>
      </div>
    </section>

    <!-- DINO GAME -->
    <section class="panel" id="dino">
      <div class="card">
        <div class="header">
          <button class="btn ghost" data-back="games">âŸµ</button>
          <div class="brand">
            <h1>ğŸ¦– Ø§Ù„Ø¯ÙŠÙ†Ø§ØµÙˆØ±</h1>
            <p>Ø§Ø¶ØºØ·/Ø§Ù„Ù…Ø³ Ù„Ù„Ù‚ÙØ².</p>
          </div>
          <span class="chip">Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</span>
        </div>

        <div class="content">
          <div class="game-wrap">
            <canvas id="dinoCanvas" width="900" height="320"></canvas>
            <div class="controls">
              <button class="btn cyan" id="dinoStart" type="button">Ø§Ø¨Ø¯Ø£</button>
              <button class="btn pink" id="dinoReset" type="button">Ø¥Ø¹Ø§Ø¯Ø©</button>
              <button class="btn ghost" id="dinoMsg" type="button">âœ‰ï¸ Ø±Ø³Ø§Ù„Ø©</button>
            </div>
            <div class="kbd">Ø§Ù„ØªØ­ÙƒÙ…: Ù„Ù…Ø³/Space = Ù‚ÙØ². Ø§Ù„Ù‡Ø¯Ù: Ø§ØªØ¬Ù†Ø¨ Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚.</div>
            <div class="msgline" id="dinoStatus"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- FROG GAME -->
    <section class="panel" id="frog">
      <div class="card">
        <div class="header">
          <button class="btn ghost" data-back="games">âŸµ</button>
          <div class="brand">
            <h1>ğŸ¸ Ø§Ù„Ø¶ÙØ¯Ø¹ Ø¶Ø¯ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨</h1>
            <p>Ø­Ø±Ù‘Ùƒ Ø§Ù„Ø¶ÙØ¯Ø¹ ÙÙˆÙ‚/ØªØ­Øª Ù„ØªÙØ§Ø¯ÙŠ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨.</p>
          </div>
          <span class="chip">Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</span>
        </div>

        <div class="content">
          <div class="game-wrap">
            <canvas id="frogCanvas" width="900" height="360"></canvas>
            <div class="controls">
              <button class="btn cyan" id="frogStart" type="button">Ø§Ø¨Ø¯Ø£</button>
              <button class="btn pink" id="frogReset" type="button">Ø¥Ø¹Ø§Ø¯Ø©</button>
              <button class="btn ghost" id="frogMsg" type="button">âœ‰ï¸ Ø±Ø³Ø§Ù„Ø©</button>
            </div>

            <div style="display:flex; gap:10px; margin-top:10px;">
              <button class="btn ghost" id="frogUp" type="button">â¬†ï¸</button>
              <button class="btn ghost" id="frogDown" type="button">â¬‡ï¸</button>
            </div>

            <div class="kbd">Ø§Ù„ØªØ­ÙƒÙ…: â¬†ï¸â¬‡ï¸ Ø£Ùˆ Ø³Ø­Ø¨ Ù„Ø£Ø¹Ù„Ù‰/Ù„Ø£Ø³ÙÙ„. Ø§Ù„Ù‡Ø¯Ù: Ø§Ø¨Ø¹Ø¯ Ø¹Ù† Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨ Ø§Ù„Ù„ÙŠ Ø¬Ø§ÙŠØ© Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ†.</div>
            <div class="msgline" id="frogStatus"></div>
          </div>
        </div>
      </div>
    </section>

  </div>

  <!-- Messages Modal -->
  <div class="modal" id="modal">
    <div class="sheet">
      <div class="header">
        <button class="btn ghost" id="closeModal">âœ–</button>
        <div class="brand">
          <h1>âœ‰ï¸ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</h1>
          <p>Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ø§Ø²Ø¹Ø§Ø¬â˜ºï¸</p>
        </div>
        <span class="chip">Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
      </div>

      <div class="content">
        <form id="msgForm" style="display:grid; gap:10px;">
          <textarea class="field" id="msgText" name="message" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." required></textarea>
          <input type="hidden" name="page" id="msgPage">
          <input type="hidden" name="_subject" value="Message from Neon Hub v3">
          <input type="text" name="_gotcha" style="display:none">
          <button class="btn pink" id="msgSend" type="submit">Ø¥Ø±Ø³Ø§Ù„</button>
          <div class="msgline" id="msgHint"></div>
        </form>
      </div>
    </div>
  </div>

  <script>
    /*************************
     * CONFIG
     *************************/
    const FORMSPREE_ENDPOINT = "https://formspree.io/f/mykdkqza";

    /*************************
     * Helpers
     *************************/
    function rand(min,max){ return Math.random()*(max-min)+min; }
    function pick(a){ return a[Math.floor(Math.random()*a.length)]; }
    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]]=[arr[j],arr[i]];
      }
      return arr;
    }
    function flashRed(){
      document.body.classList.add("flash-red");
      setTimeout(()=>document.body.classList.remove("flash-red"), 700);
    }

    /*************************
     * Floating emojis (theme-aware)
     *************************/
    const sky = document.getElementById("sky");
    function buildSky(){
      sky.innerHTML = "";
      const theme = document.body.dataset.theme || "aura";
      const sets = {
        aura:   ["âœ¨","ğŸ«§","ğŸ’«","ğŸ”®","ğŸ§","ğŸ¯","ğŸ§ ","âš¡","ğŸŒˆ","ğŸª","ğŸ§ª","ğŸ§©"],
        sunset: ["ğŸŒ…","ğŸ”¥","ğŸ†","ğŸ“","ğŸ’","âœ¨","ğŸ’—","ğŸ­","ğŸˆ","ğŸ¯","ğŸ§","ğŸ«¶"],
        ice:    ["â„ï¸","ğŸ§Š","ğŸŒ¨ï¸","ğŸª½","ğŸ«§","ğŸ’","ğŸŒ™","â­","ğŸ§ ","ğŸ§ª","ğŸ”·","ğŸ«§"],
        chaos:  ["ğŸŒ€","ğŸ’¥","ğŸ²","âš¡","ğŸ‘¾","ğŸ§¨","ğŸ­","ğŸ§ ","ğŸ©","ğŸª","ğŸ§©","ğŸ¦–"]
      };
      const EMOJI = sets[theme] || sets.aura;
      const count = Math.min(30, Math.max(18, Math.floor(window.innerWidth/42)));
      for(let i=0;i<count;i++){
        const el = document.createElement("span");
        el.className = "e";
        el.textContent = pick(EMOJI);
        el.style.left = rand(2,98) + "vw";
        el.style.setProperty("--r", rand(-35,35) + "deg");
        el.style.setProperty("--dx", rand(-18,18).toFixed(1) + "px");
        el.style.animationDuration = rand(9.5, 16.5).toFixed(2) + "s";
        el.style.animationDelay = rand(-12, 0).toFixed(2) + "s";
        sky.appendChild(el);
      }
    }

    /*************************
     * Router
     *************************/
    const panels = [...document.querySelectorAll(".panel")];
    function go(id){
      panels.forEach(p=>p.classList.toggle("active", p.id === id));
      window.scrollTo(0,0);
    }
    document.querySelectorAll("[data-home]").forEach(b=> b.addEventListener("click", ()=> go("home")));
    document.querySelectorAll("[data-open]").forEach(t=>{
      t.addEventListener("click", ()=> {
        const id = t.dataset.open;
        if(id==="jokes"){ renderJokes(jIndex); }
        if(id==="gk"){ renderGK(gIndex); }
        if(id==="countries"){ renderCountries(cIndex); }
        go(id);
      });
    });
    document.getElementById("openGames").addEventListener("click", ()=> go("games"));
    document.getElementById("openRiddles").addEventListener("click", ()=> { renderRiddles(rIndex); go("riddles"); });

    document.querySelectorAll("[data-back]").forEach(b=>{
      b.addEventListener("click", ()=> go(b.dataset.back));
    });

    /*************************
     * Typewriter
     *************************/
    let twTimer = null;
    function typewrite(el, text, speed=14){
      if(twTimer) clearInterval(twTimer);
      el.innerHTML = "";
      const cur = document.createElement("span");
      cur.className = "cursor";
      el.appendChild(cur);
      let i=0;
      twTimer = setInterval(()=>{
        if(i >= text.length){
          clearInterval(twTimer);
          twTimer = null;
          cur.remove();
          el.textContent = text;
          return;
        }
        cur.insertAdjacentText("beforebegin", text[i]);
        i++;
      }, speed);
    }

    /*************************
     * Pager helpers
     *************************/
    function buildNums(container, total, active, onPick){
      container.innerHTML = "";
      for(let i=0;i<total;i++){
        const b = document.createElement("button");
        b.className = "num" + (i===active ? " active":"");
        b.type = "button";
        b.textContent = (i+1);
        b.addEventListener("click", ()=> onPick(i));
        container.appendChild(b);
      }
    }

    /*************************
     * JOKES (new set)
     *************************/
    const jokes = [
      "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯ Ø§Ø´ØªØ±Ù‰ Ø´Ù…Ø³ÙŠØ©â€¦ Ø±Ø¬Ø¹Ù‡Ø§ Ù‚Ø§Ù„: Ø¯ÙŠ Ø¨ØªØ¹Ù…Ù„ Ø¸Ù„ Ø¨Ø³!",
      "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯ Ø³Ø£Ù„ Ø§Ù„Ù‚Ù„Ù…: Ø¨ØªÙƒØªØ¨ Ø¥Ø²Ø§ÙŠØŸ Ù‚Ø§Ù„Ù‡: Ø¹Ù„Ù‰ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø²Ø§Ø¬â€¦ Ø£Ù†Ø§ Ø±ØµØ§Øµ!",
      "Ù…Ø±Ø© Ø¨Ø·Ø§Ø±ÙŠØ© Ù‚Ø§Ù„Øª Ù„Ù„ØªØ§Ù†ÙŠØ©: Ø£Ù†Ø§ ØªØ¹Ø¨Ø§Ù†Ø©â€¦ Ù‚Ø§Ù„ØªÙ„Ù‡Ø§: Ø§Ø´Ø­Ù†ÙŠ Ù†ÙØ³Ùƒ.",
      "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯ ÙØªØ­ Ø§Ù„ÙƒØªØ§Ø¨â€¦ Ù„Ù‚Ù‰ Ø§Ù„ØµÙØ­Ø© Ø¨ØªÙ‚ÙˆÙ„: Ø§Ù‚ÙÙ„Ù†ÙŠ Ø£Ù†Ø§ Ù„Ø³Ù‡ Ù…Ø´ Ø¬Ø§Ù‡Ø²Ø©.",
      "Ù…Ø±Ø© ÙƒÙˆØ¨Ø§ÙŠØ© Ø´Ø§ÙŠ Ø§ØªØ£Ø®Ø±Øªâ€¦ Ù‚Ø§Ù„ÙˆØ§: Ø£ÙƒÙŠØ¯ Ù…Ø­Ø·ÙˆØ· ÙÙŠ â€œØ²Ø­Ù…Ø© Ø§Ù„Ù†Ø¹Ù†Ø§Ø¹â€.",
      "Ù…Ø±Ø© Ø²Ø±Ø§Ø± Ø§ØªÙˆØªØ±â€¦ Ù‚Ø§Ù„: Ø£Ù†Ø§ ÙƒØ¯Ù‡ Ù…Ø¶ØºÙˆØ· Ø²ÙŠØ§Ø¯Ø©.",
      "Ù…Ø±Ø© ÙˆØ§ÙŠ ÙØ§ÙŠ Ù‚Ø§Ù„ Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù‚Ø±Ø¨â€¦ Ø£Ù†Ø§ Ø¨Ø­Ø¨ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª Ø§Ù„Ù‚Ø±ÙŠØ¨Ø©.",
      "Ù…Ø±Ø© Ù…Ø³Ø·Ø±Ø© Ø§ØªØ®Ø§Ù†Ù‚Øªâ€¦ Ù‚Ø§Ù„Øª: Ø£Ù†Ø§ Ø§Ù„Ù„ÙŠ Ø¨Ø­Ø¯Ø¯ Ø§Ù„Ø­Ø¯ÙˆØ¯!",
      "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯ Ø¬Ø§Ø¨ Ù…Ø±Ø§ÙŠØ©â€¦ Ø¨Øµ ÙÙŠÙ‡Ø§ Ù‚Ø§Ù„: Ø¯ÙŠ Ø¨ØªÙ‚Ù„Ø¯Ù†ÙŠ!",
      "Ù…Ø±Ø© Ø³Ø§Ø¹Ø© Ù‚Ø§Ù„Øª: Ø£Ù†Ø§ Ù…Ø´ Ù…ØªØ£Ø®Ø±Ø©â€¦ Ø£Ù†Ø§ Ø¨Ø³ ÙˆØ§Ù‚ÙØ© Ø£ÙÙƒØ±.",
      "Ù…Ø±Ø© Ø³Ù„Ùƒ Ø´Ø§Ø­Ù† Ø§ØªØ¬ÙˆØ²â€¦ Ø®Ù„Ù â€œØ¨Ø§ÙˆØ± Ø¨Ù†Ùƒâ€ ØµØºÙŠØ±.",
      "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯ Ø±Ø§Ø­ ÙŠØ´ØªØ±ÙŠ Ø³ÙƒØ±â€¦ Ù‚Ø§Ù„ÙˆÙ„Ù‡: Ø¹Ø§Ø¯ÙŠ ÙˆÙ„Ø§ Ø¯Ø§ÙŠØªØŸ Ù‚Ø§Ù„: Ù‡Ø§Øª Ø§Ù„Ù„ÙŠ Ø¨ÙŠØ¶Ø­Ùƒ.",
      "Ù…Ø±Ø© ØªÙ„Ø§Ø¬Ø© Ù‚Ø§Ù„Øª: Ø£Ù†Ø§ Ø¨Ø±Ø¯Ø§Ù†Ø©â€¦ Ù‚Ø§Ù„ÙˆÙ„Ù‡Ø§: Ø¥Ù†ØªÙŠ Ø£Ø³Ø§Ø³Ù‹Ø§ Ø´ØºÙ„Ùƒ ØªØ¨Ø±ÙŠØ¯ÙŠ!",
      "Ù…Ø±Ø© ÙØ§Ø²Ø© ÙˆÙ‚Ø¹Øªâ€¦ Ù‚Ø§Ù„Øª: Ù…Ø´ Ø£Ù†Ø§â€¦ Ø§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ©!",
      "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯ Ù‚Ø§Ù„ Ù„Ù„Ù†ÙˆØ±: Ù„ÙŠÙ‡ Ù…Ø·ÙÙŠØŸ Ù‚Ø§Ù„Ù‡: ÙŠÙˆÙ… Ø±Ø§Ø­Ø© Ù†ÙØ³ÙŠØ©.",
      "Ù…Ø±Ø© ÙƒØ±Ø³ÙŠ Ù‚Ø§Ù„: Ø£Ø®ÙŠØ±Ù‹Ø§ Ø­Ø¯ â€œÙŠØ³Ù†Ø¯Ù†ÙŠâ€."
    ];
    let jIndex = 0;
    const jTitle = document.getElementById("jTitle");
    const jText  = document.getElementById("jText");
    const jNums  = document.getElementById("jNums");

    function renderJokes(idx){
      jIndex = idx;
      jTitle.textContent = `ØµÙØ­Ø© ${idx+1} / ${jokes.length}`;
      buildNums(jNums, jokes.length, idx, (i)=> renderJokes(i));
      typewrite(jText, jokes[idx], 12);
    }
    document.getElementById("jPrev").addEventListener("click", ()=> renderJokes((jIndex-1 + jokes.length)%jokes.length));
    document.getElementById("jNext").addEventListener("click", ()=> renderJokes((jIndex+1)%jokes.length));
    document.getElementById("jReplay").addEventListener("click", ()=> renderJokes(jIndex));
    document.getElementById("jMsg").addEventListener("click", openModal);

    /*************************
     * Quiz Engine
     *************************/
    function renderQuiz({data, index, qEl, optsEl, msgEl, titleEl, numsEl, onSetIndex, getPicked, setPicked}){
      const item = data[index];
      titleEl.textContent = `ØµÙØ­Ø© ${index+1} / ${data.length}`;
      buildNums(numsEl, data.length, index, (i)=> onSetIndex(i));
      qEl.textContent = item.q;
      optsEl.innerHTML = "";
      msgEl.textContent = "";
      const picked = getPicked(index);

      item.options.forEach((opt, i)=>{
        const b = document.createElement("button");
        b.type = "button";
        b.className = "opt";
        b.textContent = opt;

        if(picked !== null){
          if(i === item.answer) b.classList.add("correct");
          if(i === picked && picked !== item.answer) b.classList.add("wrong");
          b.disabled = true;
          b.style.cursor = "default";
        }

        b.addEventListener("click", ()=>{
          setPicked(index, i);
          onSetIndex(index);
        });

        optsEl.appendChild(b);
      });

      if(picked !== null){
        const ok = (picked === item.answer);
        msgEl.textContent = ok ? "ØµØ­ âœ…" : `ØºÙ„Ø· âŒ â€” Ø§Ù„ØµØ­: ${item.options[item.answer]}`;
        msgEl.className = "msgline " + (ok ? "ok":"bad");
      }else{
        msgEl.className = "msgline";
      }
    }

    /*************************
     * GK (24 questions)
     *************************/
    const gk = [
      { q:"ÙƒÙ… Ø¹Ø¯Ø¯ ÙƒÙˆØ§ÙƒØ¨ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ©ØŸ", options:["7","8","9","10"], answer:1 },
      { q:"Ø£ÙƒØ¨Ø± Ù…Ø­ÙŠØ· Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø±Ø¶ Ù‡ÙˆØŸ", options:["Ø§Ù„Ø£Ø·Ù„Ø³ÙŠ","Ø§Ù„Ù‡Ø§Ø¯Ø¦","Ø§Ù„Ù‡Ù†Ø¯ÙŠ","Ø§Ù„Ù…ØªØ¬Ù…Ø¯"], answer:1 },
      { q:"Ø£Ù‚Ø±Ø¨ ÙƒÙˆÙƒØ¨ Ù„Ù„Ø´Ù…Ø³ØŸ", options:["Ø§Ù„Ø²Ù‡Ø±Ø©","Ø§Ù„Ù…Ø±ÙŠØ®","Ø¹Ø·Ø§Ø±Ø¯","Ø§Ù„Ø£Ø±Ø¶"], answer:2 },
      { q:"Ø£Ø·ÙˆÙ„ Ø³ÙˆØ±Ø© ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù†ØŸ", options:["Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†","Ø§Ù„Ø¨Ù‚Ø±Ø©","Ø§Ù„Ù†Ø³Ø§Ø¡","Ø§Ù„Ø£Ù†Ø¹Ø§Ù…"], answer:1 },
      { q:"Ø¯Ø±Ø¬Ø© ØºÙ„ÙŠØ§Ù† Ø§Ù„Ù…Ø§Ø¡ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ØŸ", options:["90Â°","100Â°","110Â°","120Â°"], answer:1 },
      { q:"Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ O Ù‡ÙˆØŸ", options:["Ø°Ù‡Ø¨","Ø£ÙƒØ³Ø¬ÙŠÙ†","Ø£ÙˆØ²ÙˆÙ†","Ø­Ø¯ÙŠØ¯"], answer:1 },
      { q:"Ø£ÙƒØ¨Ø± ÙƒÙˆÙƒØ¨ ÙÙŠ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ©ØŸ", options:["Ø²Ø­Ù„","Ø§Ù„Ù…Ø´ØªØ±ÙŠ","Ø£ÙˆØ±Ø§Ù†ÙˆØ³","Ù†Ø¨ØªÙˆÙ†"], answer:1 },
      { q:"Ø£Ø³Ø±Ø¹ Ø­ÙŠÙˆØ§Ù† Ø¨Ø±ÙŠØŸ", options:["Ø§Ù„Ù†Ù…Ø±","Ø§Ù„ÙÙ‡Ø¯","Ø§Ù„ØºØ²Ø§Ù„","Ø§Ù„Ø°Ø¦Ø¨"], answer:1 },
      { q:"Ø¹Ø¯Ø¯ Ø£Ø¶Ù„Ø§Ø¹ Ø§Ù„Ù…Ø«Ù„Ø«ØŸ", options:["2","3","4","5"], answer:1 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ØŸ", options:["ÙƒÙŠÙˆØªÙˆ","Ø·ÙˆÙƒÙŠÙˆ","Ø£ÙˆØ³Ø§ÙƒØ§","Ù†Ø§ØºÙˆÙŠØ§"], answer:1 },
      { q:"Ø£ÙƒØ¨Ø± Ù‚Ø§Ø±Ø© Ù…Ø³Ø§Ø­Ø©ØŸ", options:["Ø£ÙØ±ÙŠÙ‚ÙŠØ§","Ø¢Ø³ÙŠØ§","Ø£ÙˆØ±ÙˆØ¨Ø§","Ø£Ù…Ø±ÙŠÙƒØ§ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©"], answer:1 },
      { q:"Ù„ØºØ© Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„ Ø§Ù„Ø±Ø³Ù…ÙŠØ©ØŸ", options:["Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠØ©","Ø§Ù„Ø¨Ø±ØªØºØ§Ù„ÙŠØ©","Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©","Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©"], answer:1 },
      { q:"Ø£ØµØºØ± Ø¯ÙˆÙ„Ø© Ù…Ø³Ø§Ø­Ø© (Ø´Ø§Ø¦Ø¹Ù‹Ø§)ØŸ", options:["Ù…Ø§Ù„Ø·Ø§","Ø§Ù„ÙØ§ØªÙŠÙƒØ§Ù†","Ø³Ù†ØºØ§ÙÙˆØ±Ø©","Ù‚Ø·Ø±"], answer:1 },
      { q:"Ù…Ø®ØªØ±Ø¹ Ø§Ù„Ù…ØµØ¨Ø§Ø­ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ (Ø´Ø§Ø¦Ø¹Ù‹Ø§)ØŸ", options:["Ù†ÙŠÙˆØªÙ†","Ø£Ø¯ÙŠØ³ÙˆÙ†","Ø¯Ø§Ø±ÙˆÙŠÙ†","Ø¬Ø±Ø§Ù‡Ø§Ù… Ø¨ÙŠÙ„"], answer:1 },
      { q:"Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø³Ù†Ø© Ø§Ù„ÙƒØ¨ÙŠØ³Ø©ØŸ", options:["365","366","364","360"], answer:1 },
      { q:"Ø£ÙƒØ¨Ø± Ø¹Ø¶Ùˆ ÙÙŠ Ø¬Ø³Ù… Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ØŸ", options:["Ø§Ù„Ù‚Ù„Ø¨","Ø§Ù„Ø¬Ù„Ø¯","Ø§Ù„ÙƒØ¨Ø¯","Ø§Ù„Ø±Ø¦Ø©"], answer:1 },
      { q:"Ø£Ù‚Ø±Ø¨ Ù†Ø¬Ù… Ù„Ù„Ø£Ø±Ø¶ Ø¨Ø¹Ø¯ Ø§Ù„Ø´Ù…Ø³ØŸ", options:["Ø§Ù„Ø´Ø¹Ø±Ù‰","Ø£Ù„ÙØ§ Ø³Ù†ØªÙˆØ±ÙŠ","Ø³Ù‡ÙŠÙ„","Ø³Ù…Ø§Ùƒ"], answer:1 },
      { q:"Ø¹Ù…Ù„Ø© Ø§Ù„Ø§ØªØ­Ø§Ø¯ Ø§Ù„Ø£ÙˆØ±ÙˆØ¨ÙŠØŸ", options:["Ø¬Ù†ÙŠÙ‡","ÙŠÙˆØ±Ùˆ","Ø¯ÙˆÙ„Ø§Ø±","ÙŠÙ†"], answer:1 },
      { q:"Ø§Ù„Ø³Ø¯Ø§Ø³ÙŠ Ù„Ù‡ ÙƒÙ… Ø¶Ù„Ø¹ØŸ", options:["5","6","7","8"], answer:1 },
      { q:"Ø£Ø¨Ø±Ø¯ ÙƒÙˆÙƒØ¨ (Ø´Ø§Ø¦Ø¹Ù‹Ø§)ØŸ", options:["Ù†Ø¨ØªÙˆÙ†","Ø£ÙˆØ±Ø§Ù†ÙˆØ³","Ø²Ø­Ù„","Ø§Ù„Ù…Ø±ÙŠØ®"], answer:1 },
      { q:"Ø£ÙƒØ«Ø± ØºØ§Ø² ÙÙŠ Ø§Ù„ØºÙ„Ø§Ù Ø§Ù„Ø¬ÙˆÙŠØŸ", options:["Ø£ÙƒØ³Ø¬ÙŠÙ†","Ù†ÙŠØªØ±ÙˆØ¬ÙŠÙ†","Ø«Ø§Ù†ÙŠ Ø£ÙƒØ³ÙŠØ¯ Ø§Ù„ÙƒØ±Ø¨ÙˆÙ†","Ù‡ÙŠÙ„ÙŠÙˆÙ…"], answer:1 },
      { q:"Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø§Ø±Ø§ØªØŸ", options:["5","6","7","8"], answer:2 },
      { q:"Ø£ØµØºØ± ÙƒÙˆÙƒØ¨ØŸ", options:["Ø¹Ø·Ø§Ø±Ø¯","Ø§Ù„Ù…Ø±ÙŠØ®","Ø§Ù„Ø£Ø±Ø¶","Ø§Ù„Ø²Ù‡Ø±Ø©"], answer:0 },
      { q:"Ø§Ù„Ø´Ø§ÙŠ ÙŠÙØµÙ†Ø¹ Ù…Ù† Ø£ÙˆØ±Ø§Ù‚ Ù†Ø¨Ø§ØªØŸ", options:["Ø§Ù„Ù†Ø¹Ù†Ø§Ø¹","Ø§Ù„ÙƒØ§Ù…ÙŠÙ„ÙŠØ§ (Camellia)","Ø§Ù„Ù„ÙŠÙ…ÙˆÙ†","Ø§Ù„Ø¨Ù†"], answer:1 },
    ];
    let gIndex = 0;
    const gPicked = Array(gk.length).fill(null);

    const gTitle = document.getElementById("gTitle");
    const gNums  = document.getElementById("gNums");
    const gQ     = document.getElementById("gQ");
    const gOpts  = document.getElementById("gOpts");
    const gMsg   = document.getElementById("gMsg");

    function renderGK(idx){
      gIndex = idx;
      renderQuiz({
        data: gk,
        index: gIndex,
        qEl: gQ, optsEl: gOpts, msgEl: gMsg,
        titleEl: gTitle, numsEl: gNums,
        onSetIndex: renderGK,
        getPicked: (i)=> gPicked[i],
        setPicked: (i,v)=> gPicked[i]=v
      });
    }
    document.getElementById("gPrev").addEventListener("click", ()=> renderGK((gIndex-1+gk.length)%gk.length));
    document.getElementById("gNext").addEventListener("click", ()=> renderGK((gIndex+1)%gk.length));
    document.getElementById("gReset").addEventListener("click", ()=>{
      for(let i=0;i<gPicked.length;i++) gPicked[i]=null;
      renderGK(gIndex);
    });
    document.getElementById("gMsgBtn").addEventListener("click", openModal);

    /*************************
     * COUNTRIES (24 questions)
     *************************/
    const countries = [
      { q:"Ø¹Ø§ØµÙ…Ø© Ù…ØµØ±ØŸ", options:["Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©","Ø§Ù„Ø£Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©","Ø§Ù„Ø£Ù‚ØµØ±","Ø£Ø³ÙˆØ§Ù†"], answer:0 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŸ", options:["Ø§Ù„Ø±ÙŠØ§Ø¶","Ø¬Ø¯Ø©","Ù…ÙƒØ©","Ø§Ù„Ø¯Ù…Ø§Ù…"], answer:0 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø¥Ù…Ø§Ø±Ø§ØªØŸ", options:["Ø¯Ø¨ÙŠ","Ø§Ù„Ø´Ø§Ø±Ù‚Ø©","Ø£Ø¨ÙˆØ¸Ø¨ÙŠ","Ø§Ù„Ø¹ÙŠÙ†"], answer:2 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ù‚Ø·Ø±ØŸ", options:["Ø§Ù„Ø¯ÙˆØ­Ø©","Ø§Ù„Ø±ÙŠØ§Ù†","Ø§Ù„Ø®ÙˆØ±","Ø§Ù„ÙˆÙƒØ±Ø©"], answer:0 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ø§Ù„ÙƒÙˆÙŠØªØŸ", options:["Ø§Ù„ÙƒÙˆÙŠØª","Ø­ÙˆÙ„ÙŠ","Ø§Ù„ÙØ±ÙˆØ§Ù†ÙŠØ©","Ø§Ù„Ø¬Ù‡Ø±Ø§Ø¡"], answer:0 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ù…ØºØ±Ø¨ØŸ", options:["Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡","Ù…Ø±Ø§ÙƒØ´","Ø§Ù„Ø±Ø¨Ø§Ø·","ÙØ§Ø³"], answer:2 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ØŸ", options:["ÙˆÙ‡Ø±Ø§Ù†","Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±","Ù‚Ø³Ù†Ø·ÙŠÙ†Ø©","Ø¹Ù†Ø§Ø¨Ø©"], answer:1 },
      { q:"Ø¹Ø§ØµÙ…Ø© ØªÙˆÙ†Ø³ØŸ", options:["ØªÙˆÙ†Ø³","ØµÙØ§Ù‚Ø³","Ø³ÙˆØ³Ø©","Ù‚Ø§Ø¨Ø³"], answer:0 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø£Ø±Ø¯Ù†ØŸ", options:["Ø§Ù„Ø²Ø±Ù‚Ø§Ø¡","Ø¥Ø±Ø¨Ø¯","Ø§Ù„Ø¹Ù‚Ø¨Ø©","Ø¹Ù…Ù‘Ø§Ù†"], answer:3 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ù„Ø¨Ù†Ø§Ù†ØŸ", options:["Ø¨ÙŠØ±ÙˆØª","Ø·Ø±Ø§Ø¨Ù„Ø³","ØµÙŠØ¯Ø§","Ø¬Ø¨ÙŠÙ„"], answer:0 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø¹Ø±Ø§Ù‚ØŸ", options:["Ø§Ù„Ø¨ØµØ±Ø©","Ø§Ù„Ù…ÙˆØµÙ„","Ø¨ØºØ¯Ø§Ø¯","Ø£Ø±Ø¨ÙŠÙ„"], answer:2 },
      { q:"Ø¹Ø§ØµÙ…Ø© ØªØ±ÙƒÙŠØ§ØŸ", options:["Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„","Ø£Ù†Ù‚Ø±Ø©","Ø¥Ø²Ù…ÙŠØ±","Ø¨ÙˆØ±ØµØ©"], answer:1 },
      { q:"Ø¹Ø§ØµÙ…Ø© ÙØ±Ù†Ø³Ø§ØŸ", options:["Ù„ÙŠÙˆÙ†","Ù…Ø±Ø³ÙŠÙ„ÙŠØ§","Ø¨Ø§Ø±ÙŠØ³","Ù†ÙŠØ³"], answer:2 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ø¥ÙŠØ·Ø§Ù„ÙŠØ§ØŸ", options:["Ø±ÙˆÙ…Ø§","Ù…ÙŠÙ„Ø§Ù†Ùˆ","Ù†Ø§Ø¨ÙˆÙ„ÙŠ","ÙÙ„ÙˆØ±Ù†Ø³Ø§"], answer:0 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§ØŸ", options:["Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©","Ù…Ø¯Ø±ÙŠØ¯","Ø¥Ø´Ø¨ÙŠÙ„ÙŠØ©","ÙØ§Ù„Ù†Ø³ÙŠØ§"], answer:1 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ø£Ù„Ù…Ø§Ù†ÙŠØ§ØŸ", options:["Ù…ÙŠÙˆÙ†Ø®","Ù‡Ø§Ù…Ø¨ÙˆØ±Øº","Ø¨Ø±Ù„ÙŠÙ†","ÙƒÙˆÙ„ÙˆÙ†ÙŠØ§"], answer:2 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ø±ÙˆØ³ÙŠØ§ØŸ", options:["Ø³Ø§Ù† Ø¨Ø·Ø±Ø³Ø¨Ø±Øº","Ù…ÙˆØ³ÙƒÙˆ","Ù‚Ø§Ø²Ø§Ù†","Ø³ÙˆØªØ´ÙŠ"], answer:1 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ø§Ù„ØµÙŠÙ†ØŸ", options:["Ø´Ù†ØºÙ‡Ø§ÙŠ","Ø¨ÙƒÙŠÙ†","Ù‡ÙˆÙ†Øº ÙƒÙˆÙ†Øº","Ø´ÙŠÙ†Ø²Ù†"], answer:1 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ØŸ", options:["Ø·ÙˆÙƒÙŠÙˆ","ÙƒÙŠÙˆØªÙˆ","Ø£ÙˆØ³Ø§ÙƒØ§","Ù†Ø§ØºÙˆÙŠØ§"], answer:0 },
      { q:"Ø¹Ø§ØµÙ…Ø© ÙƒÙ†Ø¯Ø§ØŸ", options:["ØªÙˆØ±ÙˆÙ†ØªÙˆ","Ø£ÙˆØªØ§ÙˆØ§","Ù…ÙˆÙ†ØªØ±ÙŠØ§Ù„","ÙØ§Ù†ÙƒÙˆÙØ±"], answer:1 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„ØŸ", options:["Ø±ÙŠÙˆ","Ø³Ø§Ùˆ Ø¨Ø§ÙˆÙ„Ùˆ","Ø¨Ø±Ø§Ø²ÙŠÙ„ÙŠØ§","Ø³Ù„ÙØ§Ø¯ÙˆØ±"], answer:2 },
      { q:"Ø£Ø³ØªØ±Ø§Ù„ÙŠØ§ ØªÙ‚Ø¹ ÙÙŠ Ù‚Ø§Ø±Ø©ØŸ", options:["Ø£ÙˆØ±ÙˆØ¨Ø§","Ø£ÙØ±ÙŠÙ‚ÙŠØ§","Ø£Ø³ØªØ±Ø§Ù„ÙŠØ§/Ø£ÙˆÙ‚ÙŠØ§Ù†ÙˆØ³ÙŠØ§","Ø¢Ø³ÙŠØ§"], answer:2 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ø§Ù„ÙŠÙˆÙ†Ø§Ù†ØŸ", options:["Ø£Ø«ÙŠÙ†Ø§","Ø³Ø§Ù„ÙˆÙ†ÙŠÙƒ","Ø¨Ø§ØªØ±Ø§Ø³","Ù„Ø§Ø±ÙŠØ³Ø§"], answer:0 },
      { q:"Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ù†Ø±ÙˆÙŠØ¬ØŸ", options:["Ø£ÙˆØ³Ù„Ùˆ","Ø³ØªØ§ÙÙ†Ø¬Ø±","Ø¨ÙŠØ±ØºÙ†","ØªØ±ÙˆÙ…Ø³Ùˆ"], answer:0 },
    ];
    let cIndex = 0;
    const cPicked = Array(countries.length).fill(null);

    const cTitle = document.getElementById("cTitle");
    const cNums  = document.getElementById("cNums");
    const cQ     = document.getElementById("cQ");
    const cOpts  = document.getElementById("cOpts");
    const cMsg   = document.getElementById("cMsg");

    function renderCountries(idx){
      cIndex = idx;
      renderQuiz({
        data: countries,
        index: cIndex,
        qEl: cQ, optsEl: cOpts, msgEl: cMsg,
        titleEl: cTitle, numsEl: cNums,
        onSetIndex: renderCountries,
        getPicked: (i)=> cPicked[i],
        setPicked: (i,v)=> cPicked[i]=v
      });
    }
    document.getElementById("cPrev").addEventListener("click", ()=> renderCountries((cIndex-1+countries.length)%countries.length));
    document.getElementById("cNext").addEventListener("click", ()=> renderCountries((cIndex+1)%countries.length));
    document.getElementById("cReset").addEventListener("click", ()=>{
      for(let i=0;i<cPicked.length;i++) cPicked[i]=null;
      renderCountries(cIndex);
    });
    document.getElementById("cMsgBtn").addEventListener("click", openModal);

    /*************************
     * RIDDLES (more fun)
     *************************/
    const riddles = [
      { q:"Ù„ØºØ²: Ø£ÙŠÙ‡Ù… Ù…Ø®ØªÙ„ÙØŸ (ğŸ‹ ğŸ ğŸ¥¦ ğŸ‰)", options:["ğŸ‹","ğŸ","ğŸ¥¦","ğŸ‰"], answer:2 },
      { q:"Ù„ØºØ²: Ø´ÙŠØ¡ ÙƒÙ„ Ù…Ø§ ØªØ§Ø®Ø¯ Ù…Ù†Ù‡ ÙŠÙƒØ¨Ø±ØŸ", options:["Ø§Ù„Ø­ÙØ±Ø©","Ø§Ù„Ù…Ø§Ø¡","Ø§Ù„Ù‡ÙˆØ§Ø¡","Ø§Ù„ÙˆÙ‚Øª"], answer:0 },
      { q:"Ù„ØºØ²: Ø´ÙŠØ¡ Ù„Ù‡ Ø£Ø³Ù†Ø§Ù† ÙˆÙ„Ø§ ÙŠØ¹Ø¶ØŸ", options:["Ø§Ù„Ù…Ø´Ø·","Ø§Ù„Ù…Ù†Ø´Ø§Ø±","Ø§Ù„Ø³Ø­Ù‘Ø§Ø¨","Ø§Ù„Ù…ÙØªØ§Ø­"], answer:0 },
      { q:"Ù„ØºØ²: ÙŠÙ…Ø´ÙŠ Ø¨Ù„Ø§ Ø±Ø¬Ù„ÙŠÙ† ÙˆÙŠØ¨ÙƒÙŠ Ø¨Ù„Ø§ Ø¹ÙŠÙ†ÙŠÙ†ØŸ", options:["Ø§Ù„Ø³Ø­Ø§Ø¨","Ø§Ù„Ø±ÙŠØ­","Ø§Ù„Ù…Ø·Ø±","Ø§Ù„Ø¸Ù„"], answer:2 },
      { q:"Ù„ØºØ²: Ø¨Ø§Ø¨ Ø¨Ù„Ø§ Ù…ÙØ§ØªÙŠØ­ ÙˆØ¨ÙŠØª Ø¨Ù„Ø§ Ø´Ø¨Ø§Ø¨ÙŠÙƒØŸ", options:["Ø§Ù„Ø®ÙŠÙ…Ø©","Ø§Ù„Ù‚ÙØµ","Ø§Ù„Ø³Ø¬Ù†","Ø§Ù„ÙƒÙ†Ø²"], answer:0 },
      { q:"Ù„ØºØ²: Ø£Ù†Ø§ ÙÙŠ Ø§Ù„Ù„ÙŠÙ„ Ø£Ù†ÙˆØ±â€¦ ÙˆÙÙŠ Ø§Ù„Ù†Ù‡Ø§Ø± Ø£Ø®ØªÙÙŠ. Ø£Ù†Ø§ØŸ", options:["Ø§Ù„Ù‚Ù…Ø±","Ø§Ù„Ù†Ø¬Ù…Ø©","Ø§Ù„Ø´Ù…Ø³","Ø§Ù„Ø¨Ø±Ù‚"], answer:0 },
      { q:"Ù„ØºØ²: Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠÙƒØ³Ø± Ø¥Ø°Ø§ Ù†Ø·Ù‚Ù†Ø§ Ø§Ø³Ù…Ù‡ØŸ", options:["Ø§Ù„ØµÙ…Øª","Ø§Ù„Ø²Ø¬Ø§Ø¬","Ø§Ù„Ø³Ø±","Ø§Ù„Ø­Ø¨Ù„"], answer:0 },
      { q:"Ù„ØºØ²: Ø´ÙŠØ¡ ÙŠØ·ÙŠØ± Ø¨Ù„Ø§ Ø¬Ù†Ø§Ø­ØŸ", options:["Ø§Ù„Ø¯Ø®Ø§Ù†","Ø§Ù„Ø­Ø¬Ø±","Ø§Ù„Ù…Ø§Ø¡","Ø§Ù„Ø®Ø´Ø¨"], answer:0 }
    ];
    let rIndex = 0;
    const rPicked = Array(riddles.length).fill(null);

    const rTitle = document.getElementById("rTitle");
    const rNums  = document.getElementById("rNums");
    const rQ     = document.getElementById("rQ");
    const rOpts  = document.getElementById("rOpts");
    const rMsg   = document.getElementById("rMsg");

    function renderRiddles(idx){
      rIndex = idx;
      renderQuiz({
        data: riddles,
        index: rIndex,
        qEl: rQ, optsEl: rOpts, msgEl: rMsg,
        titleEl: rTitle, numsEl: rNums,
        onSetIndex: renderRiddles,
        getPicked: (i)=> rPicked[i],
        setPicked: (i,v)=> rPicked[i]=v
      });
    }
    document.getElementById("rPrev").addEventListener("click", ()=> renderRiddles((rIndex-1+riddles.length)%riddles.length));
    document.getElementById("rNext").addEventListener("click", ()=> renderRiddles((rIndex+1)%riddles.length));
    document.getElementById("rReset").addEventListener("click", ()=>{
      for(let i=0;i<rPicked.length;i++) rPicked[i]=null;
      renderRiddles(rIndex);
    });
    document.getElementById("rMsgBtn").addEventListener("click", openModal);

    /*************************
     * THEMES
     *************************/
    const tMsg = document.getElementById("tMsg");
    document.querySelectorAll("[data-theme]").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const theme = btn.dataset.theme;
        setTheme(theme);
        tMsg.textContent = `ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø«ÙŠÙ…: ${theme} âœ…`;
        tMsg.className = "msgline ok";
      });
    });
    document.getElementById("tBackHome").addEventListener("click", ()=> go("home"));

    function setTheme(theme){
      document.body.dataset.theme = theme;
      localStorage.setItem("neonhub_theme", theme);
      buildSky();
      // theme "chaos" changes home order a bit (creative touch)
      const grid = document.getElementById("homeGrid");
      if(theme === "chaos"){
        // reorder tiles for fun: themes first
        const tiles = [...grid.querySelectorAll(".tile")];
        const byId = (id)=> tiles.find(t=>t.dataset.open===id);
        grid.innerHTML = "";
        [byId("themes"), byId("countries"), byId("gk"), byId("jokes")].forEach(x=> grid.appendChild(x));
      }else{
        // restore default order
        const tiles = [...grid.querySelectorAll(".tile")];
        const byId = (id)=> tiles.find(t=>t.dataset.open===id);
        grid.innerHTML = "";
        ["jokes","gk","countries","themes"].forEach(id=>{
          const el = byId(id);
          if(el) grid.appendChild(el);
        });
      }
    }

    /*************************
     * GAMES MENU -> open pages
     *************************/
    document.querySelectorAll("[data-game]").forEach(b=>{
      b.addEventListener("click", ()=>{
        const id = b.dataset.game;
        go(id);
        if(id==="xo") resetXO();
        if(id==="memory") buildMemory();
        if(id==="dino") dinoDrawSplash();
        if(id==="frog") frogDrawSplash();
      });
    });
    document.getElementById("gMsg2").addEventListener("click", openModal);

    /*************************
     * XO GAME
     *************************/
    const xoBoardEl = document.getElementById("xoBoard");
    const xoStatus = document.getElementById("xoStatus");
    const xoRestart = document.getElementById("xoRestart");

    let xo = Array(9).fill(null);
    let xoOver = false;

    function winner(b){
      const lines = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
      ];
      for(const [a,c,d] of lines){
        if(b[a] && b[a]===b[c] && b[a]===b[d]) return b[a];
      }
      if(b.every(Boolean)) return "draw";
      return null;
    }
    function score(b){
      const w = winner(b);
      if(w==="â­•") return 10;
      if(w==="âŒ") return -10;
      return 0;
    }
    function minimax(b, depth, isMax, maxDepth){
      const w = winner(b);
      if(w || depth === maxDepth) return score(b);

      const empties = b.map((v,i)=>v?null:i).filter(v=>v!==null);
      if(isMax){
        let best = -Infinity;
        for(const i of empties){
          b[i] = "â­•";
          best = Math.max(best, minimax(b, depth+1, false, maxDepth));
          b[i] = null;
        }
        return best - depth*0.2;
      }else{
        let best = Infinity;
        for(const i of empties){
          b[i] = "âŒ";
          best = Math.min(best, minimax(b, depth+1, true, maxDepth));
          b[i] = null;
        }
        return best + depth*0.2;
      }
    }
    function bestMove(b){
      const empties = b.map((v,i)=>v?null:i).filter(v=>v!==null);
      if(Math.random() < 0.18){
        return empties[Math.floor(Math.random()*empties.length)];
      }
      let best = -Infinity, move = empties[0];
      for(const i of empties){
        b[i] = "â­•";
        const val = minimax(b, 0, false, 4);
        b[i] = null;
        if(val > best){ best = val; move = i; }
      }
      return move;
    }

    function renderXO(){
      xoBoardEl.innerHTML = "";
      xo.forEach((v, idx)=>{
        const cell = document.createElement("div");
        cell.className = "xo-cell" + (xoOver ? " disabled" : "");
        cell.textContent = v || "";
        cell.addEventListener("click", ()=>{
          if(xoOver) return;
          if(xo[idx]) return;
          xo[idx] = "âŒ";
          afterMove();
        });
        xoBoardEl.appendChild(cell);
      });
    }
    function afterMove(){
      renderXO();
      let w = winner(xo);
      if(w){ endXO(w); return; }

      xoStatus.textContent = "Ø¯ÙˆØ± Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±â€¦";
      setTimeout(()=>{
        const m = bestMove(xo.slice());
        if(m !== undefined && m !== null) xo[m] = "â­•";
        renderXO();
        w = winner(xo);
        if(w) endXO(w);
        else xoStatus.textContent = "Ø¯ÙˆØ±Ùƒ.";
      }, 320);
    }
    function endXO(w){
      xoOver = true;
      if(w === "âŒ"){
        xoStatus.textContent = "ÙØ²Øª âœ…";
        xoStatus.className = "msgline ok";
      }else if(w === "â­•"){
        xoStatus.textContent = "Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙƒØ³Ø¨ ğŸ˜ˆ";
        xoStatus.className = "msgline bad";
      }else{
        xoStatus.textContent = "ØªØ¹Ø§Ø¯Ù„";
        xoStatus.className = "msgline";
      }
    }
    function resetXO(){
      xo = Array(9).fill(null);
      xoOver = false;
      xoStatus.textContent = "Ø¯ÙˆØ±Ùƒ.";
      xoStatus.className = "msgline";
      renderXO();
    }
    xoRestart.addEventListener("click", resetXO);
    document.getElementById("xoMsg").addEventListener("click", openModal);

    /*************************
     * MEMORY GAME
     *************************/
    const memoryGrid = document.getElementById("memoryGrid");
    const memStatus = document.getElementById("memStatus");
    const memStart = document.getElementById("memStart");

    const MEM_POOL = [
      "ğŸ˜‚","ğŸ¤£","ğŸ˜­","ğŸ¥²","ğŸ˜ˆ","ğŸ™ˆ","ğŸ˜","ğŸ¤",
      "ğŸ’—","ğŸ’˜","âœ¨","ğŸŒ™","â­","ğŸ§ ","ğŸ‰","ğŸ”¥",
      "ğŸ©","ğŸª","âš¡","ğŸ¯","ğŸ§©","ğŸ§ª","ğŸ«§","ğŸ”®"
    ];

    function pickUnique(pool, n){
      const copy = pool.slice();
      shuffle(copy);
      return copy.slice(0, n);
    }
    let memFirst=null, memLock=false, memMatched=0;

    function buildMemory(){
      memoryGrid.innerHTML = "";
      memFirst=null; memLock=false; memMatched=0;
      memStatus.textContent = "ØªÙ…: 0 / 8";

      const chosen = pickUnique(MEM_POOL, 8);
      const deck = shuffle([...chosen, ...chosen]);

      deck.forEach(emo=>{
        const c = document.createElement("div");
        c.className = "mcard";
        c.dataset.emo = emo;
        c.innerHTML = `<div class="mfront">â”</div><div class="mback">${emo}</div>`;
        c.addEventListener("click", ()=>{
          if(memLock) return;
          if(c.classList.contains("matched")) return;
          if(c.classList.contains("revealed")) return;

          c.classList.add("revealed");

          if(!memFirst){ memFirst = c; return; }
          const a = memFirst, b = c;
          memFirst = null;

          if(a.dataset.emo === b.dataset.emo){
            a.classList.add("matched");
            b.classList.add("matched");
            memMatched++;
            memStatus.textContent = `ØªÙ…: ${memMatched} / 8`;
          }else{
            memLock = true;
            setTimeout(()=>{
              a.classList.remove("revealed");
              b.classList.remove("revealed");
              memLock = false;
            }, 520);
          }
        });
        memoryGrid.appendChild(c);
      });
    }
    memStart.addEventListener("click", buildMemory);
    document.getElementById("memMsg").addEventListener("click", openModal);

    /*************************
     * DINO RUNNER (Canvas)
     *************************/
    const dinoCanvas = document.getElementById("dinoCanvas");
    const dctx = dinoCanvas.getContext("2d");
    const dinoStatus = document.getElementById("dinoStatus");
    let dinoRAF=null, dinoRunning=false;

    const dino = {
      x: 70, y: 0, w: 34, h: 46,
      vy: 0, onGround: true
    };
    const dinoGame = {
      t:0, score:0, speed: 5.5,
      groundY: 260,
      obstacles: [],
      spawnTimer: 0,
      over: false
    };

    function dinoReset(){
      dino.y = dinoGame.groundY - dino.h;
      dino.vy = 0;
      dino.onGround = true;
      dinoGame.t=0; dinoGame.score=0; dinoGame.speed=5.5;
      dinoGame.obstacles=[];
      dinoGame.spawnTimer=0;
      dinoGame.over=false;
      dinoStatus.textContent = "Ø¬Ø§Ù‡Ø²â€¦ Ø§Ø¶ØºØ· Ø§Ø¨Ø¯Ø£.";
      dinoStatus.className = "msgline";
      dinoDrawSplash();
    }

    function dinoJump(){
      if(!dinoRunning || dinoGame.over) return;
      if(dino.onGround){
        dino.vy = -12.5;
        dino.onGround = false;
      }
    }

    function spawnObstacle(){
      const h = pick([28, 36, 44]);
      const w = pick([16, 18, 22]);
      dinoGame.obstacles.push({ x: 900, y: dinoGame.groundY - h, w, h });
    }

    function rectHit(a,b){
      return a.x < b.x + b.w && a.x + a.w > b.x &&
             a.y < b.y + b.h && a.y + a.h > b.y;
    }

    function dinoLoop(){
      dinoRAF = requestAnimationFrame(dinoLoop);
      if(!dinoRunning) return;

      // update
      dinoGame.t++;
      dinoGame.score += 0.15;
      dinoGame.speed = Math.min(11, dinoGame.speed + 0.0018);

      // gravity
      dino.vy += 0.55;
      dino.y += dino.vy;

      if(dino.y >= dinoGame.groundY - dino.h){
        dino.y = dinoGame.groundY - dino.h;
        dino.vy = 0;
        dino.onGround = true;
      }

      // obstacles
      dinoGame.spawnTimer--;
      if(dinoGame.spawnTimer <= 0){
        spawnObstacle();
        dinoGame.spawnTimer = Math.floor(rand(55, 90));
      }
      dinoGame.obstacles.forEach(o => o.x -= dinoGame.speed);
      dinoGame.obstacles = dinoGame.obstacles.filter(o => o.x + o.w > -30);

      // collision
      const dRect = { x:dino.x, y:dino.y, w:dino.w, h:dino.h };
      for(const o of dinoGame.obstacles){
        if(rectHit(dRect, o)){
          dinoGame.over = true;
          dinoRunning = false;
          dinoStatus.textContent = `Ø®Ø³Ø±Øª ğŸ˜ˆ â€” Ø³ÙƒÙˆØ±: ${Math.floor(dinoGame.score)}`;
          dinoStatus.className = "msgline bad";
          break;
        }
      }

      // draw
      dctx.clearRect(0,0,dinoCanvas.width,dinoCanvas.height);

      // background glow
      dctx.globalAlpha = 0.9;
      dctx.fillStyle = "rgba(255,255,255,0.04)";
      dctx.fillRect(0,0,dinoCanvas.width,dinoCanvas.height);
      dctx.globalAlpha = 1;

      // ground
      dctx.fillStyle = "rgba(255,255,255,0.18)";
      dctx.fillRect(0, dinoGame.groundY, dinoCanvas.width, 3);

      // dino (simple)
      dctx.fillStyle = "rgba(103,240,255,0.85)";
      dctx.fillRect(dino.x, dino.y, dino.w, dino.h);

      // obstacles
      dctx.fillStyle = "rgba(255,95,209,0.80)";
      for(const o of dinoGame.obstacles){
        dctx.fillRect(o.x, o.y, o.w, o.h);
      }

      // score
      dctx.fillStyle = "rgba(238,244,255,0.9)";
      dctx.font = "bold 18px system-ui";
      dctx.fillText("Score: " + Math.floor(dinoGame.score), 18, 30);
    }

    function dinoDrawSplash(){
      dctx.clearRect(0,0,dinoCanvas.width,dinoCanvas.height);
      dctx.fillStyle = "rgba(255,255,255,0.04)";
      dctx.fillRect(0,0,dinoCanvas.width,dinoCanvas.height);
      dctx.fillStyle = "rgba(238,244,255,0.9)";
      dctx.font = "bold 18px system-ui";
      dctx.fillText("Tap / Space to Jump", 18, 30);
      dctx.fillStyle = "rgba(255,255,255,0.18)";
      dctx.fillRect(0, dinoGame.groundY, dinoCanvas.width, 3);
      dctx.fillStyle = "rgba(103,240,255,0.85)";
      dctx.fillRect(dino.x, dinoGame.groundY - dino.h, dino.w, dino.h);
    }

    function dinoStart(){
      if(dinoRAF === null) dinoLoop();
      if(dinoGame.over) dinoReset();
      dinoRunning = true;
      dinoStatus.textContent = "Ø´ØºÙ‘Ø§Ù„â€¦ Ø§ØªØ¬Ù†Ø¨ Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚!";
      dinoStatus.className = "msgline";
    }

    document.getElementById("dinoStart").addEventListener("click", dinoStart);
    document.getElementById("dinoReset").addEventListener("click", dinoReset);
    document.getElementById("dinoMsg").addEventListener("click", openModal);

    dinoCanvas.addEventListener("pointerdown", ()=> dinoJump());
    window.addEventListener("keydown", (e)=>{
      if(e.code === "Space") { e.preventDefault(); dinoJump(); }
    });

    /*************************
     * FROG DODGE (Canvas)
     *************************/
    const frogCanvas = document.getElementById("frogCanvas");
    const fctx = frogCanvas.getContext("2d");
    const frogStatus = document.getElementById("frogStatus");
    let frogRAF=null, frogRunning=false;

    const frog = { x: 120, y: 180, r: 18 };
    const frogGame = {
      score: 0,
      speed: 5.0,
      doors: [],
      spawn: 0,
      over: false
    };

    function frogReset(){
      frog.y = frogCanvas.height/2;
      frogGame.score=0;
      frogGame.speed=5.0;
      frogGame.doors=[];
      frogGame.spawn=0;
      frogGame.over=false;
      frogRunning=false;
      frogStatus.textContent = "Ø¬Ø§Ù‡Ø²â€¦ Ø§Ø¶ØºØ· Ø§Ø¨Ø¯Ø£.";
      frogStatus.className = "msgline";
      frogDrawSplash();
    }

    function frogStart(){
      if(frogRAF === null) frogLoop();
      if(frogGame.over) frogReset();
      frogRunning = true;
      frogStatus.textContent = "Ø´ØºÙ‘Ø§Ù„â€¦ ØªØ¬Ù†Ø¨ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨!";
      frogStatus.className = "msgline";
    }

    function spawnDoor(){
      // door is a tall rectangle with a gap? User said doors hitting frog. We'll do single rectangle on one lane.
      const h = pick([70, 90, 110]);
      const y = Math.floor(rand(30, frogCanvas.height - h - 30));
      const w = pick([26, 34]);
      frogGame.doors.push({ x: frogCanvas.width + 20, y, w, h });
    }

    function frogHit(door){
      // circle-rect collision approx
      const cx = frog.x, cy = frog.y, r = frog.r;
      const rx = door.x, ry = door.y, rw = door.w, rh = door.h;
      const nx = Math.max(rx, Math.min(cx, rx+rw));
      const ny = Math.max(ry, Math.min(cy, ry+rh));
      const dx = cx - nx, dy = cy - ny;
      return (dx*dx + dy*dy) <= r*r;
    }

    function frogMove(dy){
      if(!frogRunning || frogGame.over) return;
      frog.y += dy;
      frog.y = Math.max(frog.r+8, Math.min(frogCanvas.height - frog.r - 8, frog.y));
    }

    let lastPointerY = null;
    frogCanvas.addEventListener("pointerdown", (e)=>{
      lastPointerY = e.clientY;
      frogCanvas.setPointerCapture(e.pointerId);
    });
    frogCanvas.addEventListener("pointermove", (e)=>{
      if(lastPointerY === null) return;
      const delta = e.clientY - lastPointerY;
      // drag up => negative => move up
      frogMove(delta * 0.35);
      lastPointerY = e.clientY;
    });
    frogCanvas.addEventListener("pointerup", ()=> { lastPointerY = null; });

    document.getElementById("frogUp").addEventListener("click", ()=> frogMove(-26));
    document.getElementById("frogDown").addEventListener("click", ()=> frogMove(26));
    window.addEventListener("keydown", (e)=>{
      if(!document.getElementById("frog").classList.contains("active")) return;
      if(e.key === "ArrowUp"){ e.preventDefault(); frogMove(-26); }
      if(e.key === "ArrowDown"){ e.preventDefault(); frogMove(26); }
    });

    function frogLoop(){
      frogRAF = requestAnimationFrame(frogLoop);
      if(!frogRunning) return;

      frogGame.score += 0.20;
      frogGame.speed = Math.min(12, frogGame.speed + 0.0022);

      frogGame.spawn--;
      if(frogGame.spawn <= 0){
        spawnDoor();
        frogGame.spawn = Math.floor(rand(40, 70));
      }

      frogGame.doors.forEach(d=> d.x -= frogGame.speed);
      frogGame.doors = frogGame.doors.filter(d=> d.x + d.w > -40);

      for(const d of frogGame.doors){
        if(frogHit(d)){
          frogGame.over = true;
          frogRunning = false;
          frogStatus.textContent = `Ø®Ø³Ø±Øª ğŸ˜ˆ â€” Ø³ÙƒÙˆØ±: ${Math.floor(frogGame.score)}`;
          frogStatus.className = "msgline bad";
          break;
        }
      }

      // draw
      fctx.clearRect(0,0,frogCanvas.width,frogCanvas.height);
      fctx.fillStyle = "rgba(255,255,255,0.04)";
      fctx.fillRect(0,0,frogCanvas.width,frogCanvas.height);

      // lanes (visual)
      fctx.strokeStyle = "rgba(255,255,255,0.10)";
      fctx.lineWidth = 2;
      fctx.beginPath();
      fctx.moveTo(0, frogCanvas.height/3);
      fctx.lineTo(frogCanvas.width, frogCanvas.height/3);
      fctx.moveTo(0, 2*frogCanvas.height/3);
      fctx.lineTo(frogCanvas.width, 2*frogCanvas.height/3);
      fctx.stroke();

      // doors
      fctx.fillStyle = "rgba(255,211,111,0.85)";
      frogGame.doors.forEach(d=>{
        fctx.fillRect(d.x, d.y, d.w, d.h);
        // door knob
        fctx.fillStyle = "rgba(255,95,209,0.85)";
        fctx.beginPath();
        fctx.arc(d.x + d.w*0.7, d.y + d.h*0.55, 5, 0, Math.PI*2);
        fctx.fill();
        fctx.fillStyle = "rgba(255,211,111,0.85)";
      });

      // frog
      fctx.fillStyle = "rgba(125,255,179,0.92)";
      fctx.beginPath();
      fctx.arc(frog.x, frog.y, frog.r, 0, Math.PI*2);
      fctx.fill();

      // eyes
      fctx.fillStyle = "rgba(0,0,0,0.55)";
      fctx.beginPath();
      fctx.arc(frog.x-6, frog.y-5, 3, 0, Math.PI*2);
      fctx.arc(frog.x+6, frog.y-5, 3, 0, Math.PI*2);
      fctx.fill();

      // score
      fctx.fillStyle = "rgba(238,244,255,0.9)";
      fctx.font = "bold 18px system-ui";
      fctx.fillText("Score: " + Math.floor(frogGame.score), 18, 30);
    }

    function frogDrawSplash(){
      fctx.clearRect(0,0,frogCanvas.width,frogCanvas.height);
      fctx.fillStyle = "rgba(255,255,255,0.04)";
      fctx.fillRect(0,0,frogCanvas.width,frogCanvas.height);
      fctx.fillStyle = "rgba(238,244,255,0.9)";
      fctx.font = "bold 18px system-ui";
      fctx.fillText("Use â¬†ï¸â¬‡ï¸ or Drag", 18, 30);
      fctx.fillStyle = "rgba(125,255,179,0.92)";
      fctx.beginPath();
      fctx.arc(frog.x, frogCanvas.height/2, frog.r, 0, Math.PI*2);
      fctx.fill();
    }

    document.getElementById("frogStart").addEventListener("click", frogStart);
    document.getElementById("frogReset").addEventListener("click", frogReset);
    document.getElementById("frogMsg").addEventListener("click", openModal);

    /*************************
     * Messages modal + Formspree
     *************************/
    const modal = document.getElementById("modal");
    const openMessages = document.getElementById("openMessages");
    const closeModal = document.getElementById("closeModal");

    function openModal(){
      modal.classList.add("show");
      document.getElementById("msgHint").textContent = "";
      document.getElementById("msgHint").className = "msgline";
    }
    function hideModal(){
      modal.classList.remove("show");
    }
    openMessages.addEventListener("click", openModal);
    closeModal.addEventListener("click", hideModal);
    modal.addEventListener("click", (e)=>{ if(e.target === modal) hideModal(); });

    document.getElementById("jMsg").addEventListener("click", openModal);
    document.getElementById("gMsgBtn").addEventListener("click", openModal);
    document.getElementById("cMsgBtn").addEventListener("click", openModal);

    const msgForm = document.getElementById("msgForm");
    const msgText = document.getElementById("msgText");
    const msgPage = document.getElementById("msgPage");
    const msgSend = document.getElementById("msgSend");
    const msgHint = document.getElementById("msgHint");

    msgForm.addEventListener("submit", async (e)=>{
      e.preventDefault();

      const gotcha = msgForm.querySelector('[name="_gotcha"]').value;
      if(gotcha) return;

      const msg = (msgText.value || "").trim();
      if(!msg){
        flashRed();
        msgText.focus();
        return;
      }

      msgPage.value = location.href;
      msgSend.disabled = true;
      msgHint.textContent = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...";

      try{
        const fd = new FormData(msgForm);

        let res = await fetch(FORMSPREE_ENDPOINT, {
          method: "POST",
          body: fd,
          headers: { "Accept":"application/json" }
        });

        if(!res.ok){
          const payload = new URLSearchParams();
          for(const [k,v] of fd.entries()) payload.append(k, String(v));
          res = await fetch(FORMSPREE_ENDPOINT, {
            method:"POST",
            headers:{
              "Accept":"application/json",
              "Content-Type":"application/x-www-form-urlencoded"
            },
            body: payload.toString()
          });
        }

        const data = await res.json().catch(()=>({}));
        if(!res.ok){
          const m = data?.error || data?.message || "Ù…Ø±ÙÙˆØ¶";
          msgHint.textContent = `ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ (${res.status}): ${m}`;
          msgHint.className = "msgline bad";
          flashRed();
          msgSend.disabled = false;
          return;
        }

        msgHint.textContent = "ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ âœ…";
        msgHint.className = "msgline ok";
        msgSend.disabled = false;

      }catch(err){
        msgHint.textContent = "ÙØ´Ù„ Ø§ØªØµØ§Ù„/Ø­Ø¸Ø± Ù…Ù† Ø¥Ø¶Ø§ÙØ©. Ø¬Ø±Ù‘Ø¨ Incognito Ø£Ùˆ Ø¨Ø¯Ù‘Ù„ ÙÙˆØ±Ù….";
        msgHint.className = "msgline bad";
        flashRed();
        msgSend.disabled = false;
      }
    });

    /*************************
     * Misc bindings
     *************************/
    document.getElementById("jMsg").addEventListener("click", openModal);
    document.getElementById("jMsg").addEventListener("click", openModal);

    /*************************
     * INIT
     *************************/
    // restore theme
    const savedTheme = localStorage.getItem("neonhub_theme") || "aura";
    document.body.dataset.theme = savedTheme;
    buildSky();

    // initial renders
    renderJokes(0);
    renderGK(0);
    renderCountries(0);
    renderRiddles(0);

    // init games
    resetXO();
    buildMemory();
    dinoReset();
    frogReset();

    // Home -> games
    document.getElementById("openGames").addEventListener("click", ()=> go("games"));

    // Messages shortcuts
    document.getElementById("gMsg2").addEventListener("click", openModal);
  </script>
</body>
</html>

